# Проект для анализа и визуализации зависимостей пакетов Rust.

## Описание

Инструмент позволяет анализировать граф зависимостей пакетов Rust в двух режимах:
- **Реальный режим** - получение данных через crates.io API
- **Тестовый режим** - использование локальных файлов для тестирования

## Этапы реализации

### Этап 1: Парсинг аргументов командной строки

Реализует разбор и валидацию параметров:

- `--package` - имя анализируемого пакета
- `--repo` - путь к файлу тестового репозитория (только в тестовом режиме)
- `--mode` - режим работы (real/test)
- `--depth` - максимальная глубина анализа
- `--output` - имя выходного файла
- `--ascii` - режим ASCII-дерева

**Что происходит:** Программа проверяет корректность входных данных, валидирует путь к файлу в тестовом режиме.

### Этап 2: Получение прямых зависимостей

Извлекает зависимости через crates.io API.

**Что происходит:**
- Отправляется запрос к `https://crates.io/api/v1/crates/{package}/versions`
- Получается информация о последней версии пакета
- Загружаются зависимости через `/dependencies` эндпоинт
- Выводится список прямых зависимостей

### Этап 3: Построение графа зависимостей

Строит полный граф с учетом транзитивности и обнаруживает циклы.

**Что происходит:**
- Инициализируется класс `DependencyGraph`
- Запускается рекурсивный DFS с ограничением глубины
- В реальном режиме для каждого пакета делается запрос к crates.io API
- В тестовом режиме используется локальный файл с описанием зависимостей
- Обнаруживаются циклические зависимости
- Выводится полный граф и статистика

**Примеры запуска:**
```bash
# Реальный режим
python 3stage.py --package serde --mode real --depth 5

# Тестовый режим
python 3stage.py --package A --repo test_complex.txt --mode test --depth 5
```

## Тестовый режим

Тестовый файл (`test_complex.txt`) используется для отладки без обращения к реальному API. Формат файла должен содержать описание зависимостей пакетов в структурированном виде.

## Обработка циклов

При обнаружении циклических зависимостей программа:
- Фиксирует путь цикла
- Продолжает анализ других ветвей
- Выводит все обнаруженные циклы в конце

## Особенности

- Рекурсивный обход графа с ограничением глубины
- Обнаружение и обработка циклических зависимостей
- Поддержка двух режимов работы (реальный/тестовый)

