# Вариант 20

# Инструмент визуализации графа зависимостей

Проект для анализа и визуализации зависимостей пакетов Rust с использованием алгоритма DFS.

## Описание этапов

### Этап 1: Парсинг аргументов командной строки

Реализует разбор и валидацию параметров:
- `--package` - имя анализируемого пакета
- `--repo` - URL репозитория или путь к тестовому файлу
- `--mode` - режим работы (real/test)
- `--depth` - максимальная глубина анализа
- `--output` - имя выходного файла
- `--ascii` - режим ASCII-дерева

**Что происходит:** Программа проверяет корректность входных данных, валидирует URL в реальном режиме или путь к файлу в тестовом режиме.

### Этап 2: Получение прямых зависимостей

Извлекает зависимости из файла Cargo.toml репозитория.

**Что происходит:**
- Формируется raw URL для GitHub репозитория
- Загружается содержимое Cargo.toml
- Парсится секция [dependencies] регулярными выражениями
- Выводится список прямых зависимостей

### Этап 3: Построение графа зависимостей

Строит полный граф с учетом транзитивности и обнаруживает циклы.

**Что происходит:**
- Инициализируется класс DependencyGraph
- Запускается рекурсивный DFS с ограничением глубины
- Обнаруживаются циклические зависимости
- Выводится полный граф и статистика

## Тестовый режим

Тестовый файл (`test_complex.txt`) используется для отладки без обращения к реальным репозиториям.

**Формат:**
```
PackageName: Dep1, Dep2, Dep3
AnotherPackage: Dep4
```

Каждая строка описывает пакет и его зависимости. Пустая строка после двоеточия означает отсутствие зависимостей.

## Примеры использования

### Реальный режим
```bash
python 3stage.py --package serde --repo https://github.com/serde-rs/serde --mode real --depth 3
```

### Тестовый режим
```bash
python 3stage.py --package A --repo test_complex.txt --mode test --depth 5
```

## Обработка циклов

При обнаружении циклических зависимостей программа:
- Фиксирует путь цикла
- Продолжает анализ других ветвей
- Выводит все обнаруженные циклы в конце